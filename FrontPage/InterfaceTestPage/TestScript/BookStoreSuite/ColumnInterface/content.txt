!*> '''测试用例'''
接口：action=column
接口描述：详见http://10.255.223.6/wiki/pages/viewpage.action?pageId=3933440
相关数据库表：库digital
 * 表media_column
 * 表media_column_content
 * 表media_sale
 * 表media
|Comment|
|用例编号|前提条件|测试点|用例描述|预期结果|运行环境|
|Case01||获取当当读书->书籍栏目下数据|调用接口|返回的数据与数据库数据一致|all|
|Case02||栏目下书籍为空|调用接口|返回11003|testing|
|Case03||排序|【后台】设置排序值，调用接口|返回结果排序正确|testing|
|Case04||排序|【后台】更改状态后，调用接口|返回结果排序正确|testing|
|Case05||有效期|【后台】设置有效期后，调用接口|过了有效期的书不返回|testing|
|Case06||栏目下有下架的书|书下架后，调用接口|下架的书不返回|testing|
|Case07||参数columnType|columnType值为空|返回10002|all|
|Case08||参数columnType|columnType值为无效值|返回10002|all|
|Case09||参数start|start值为空|返回10002|all|
|Case10||参数start|start值大于列表总数时|返回空数据|all|
|Case11||参数start|start值为无效值|返回10002|all|
|Case12||参数end|end值为空|返回10002|all|
|Case13||参数end|end值为无效值|返回10002|all|
|Case14||参数start和end|start值大于end值|返回10002|all|
|Case15||参数isFull|isFull值为空|返回10002|all|
|Case16||参数isFull|isFull为无效值|返回10002|all|
|Case17||删除栏目下数据|调用接口|能正常返回数据|testing|
|Case18||删除栏目|调用接口|返回10002|testing|
*!
!*> 测试数据
!include .FrontPage.InterfaceTestPage.TestScript.BookStoreSuite.ColumnInterface.ColumnInterfaceOnline
!*> Import
!define TEST_SYSTEM {slim}
|Import|
|com.dangdang.readerV5.bookstore|
*!
!*> 定义scenario 
|scenario|column|action||columnType||start||end||isFull||statusCode||setParameters|
|setParameters|!{action:@action,columnType:@columnType,start:@start,end:@end,isFull:@isFull}|
|ensure|do get|@statusCode|
|ensure|verify result|
*!
!* columnCase02 栏目下书籍为空
|script|Column|
|note|后台创建一个新栏目，type=0书籍 type=1频道|
|$columnType=|create with name|书籍栏目|and code|column_test|and type|0|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|11003|
*!
!* columnCase03 模拟后台在某栏目下添加书
|script|Column|
|note|栏目下添加10本书，type=0普通书籍栏目 type=1借阅 type=2限免|
|insertWithColumncode|$columnType|and size|10|and type|0|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|0|
|ensure|verify result|
*!
!* columnCase04 模拟后台设置排序值
|script|Column|
|note|排序|
|$saleId=|setSortWithColumncode|$columnType|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|0|
|ensure|verify result|
*!
!* columnCase05 模拟后台设置状态值
|script|Column|
|note|设置为强制有效|
|$saleId=|setEffectiveWithColumncode|$columnType|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|0|
|ensure|verify result|

|script|Column|
|note|设置为强制无效|
|$saleId=|setInvalidWithColumncode|$columnType|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|0|
|ensure|verify result|
*!
!* columnCase06 模拟后台设置有效期
|script|Column|
|note|设置有效期|
|$saleId=|setEffectiveWithColumncode|$columnType|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|0|
|ensure|verify result|
*!
!* columnCase07 模拟后台下架书
|script|Column|
|note|下架书|
|$saleId=|setShelfStatusWithColumncode|$columnType|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|0|
|ensure|verify result|
*!
!* columnCase08 模拟后台上架书
|script|Column|
|note|上架书|
|$saleId=|setShelfStatusWithSaleid|$saleId|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|0|
|ensure|verify result|
*!
!* columnCase19 模拟后台删除栏目下书
|script|Column|
|note|删除书|
|$saleId=|delColumnDataWithColumncode|$columnType|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|0|
|ensure|verify result|
*!
!* columnCase20 模拟后台删除栏目
|script|Column|
|note|删除栏目|
|delColumnWithColumncode|$columnType|
|setParameters|!{action:column,columnType:$columnType,start:0,end:9,isFull:1}|
|ensure|do get|10002|
*!
*!
!contents

