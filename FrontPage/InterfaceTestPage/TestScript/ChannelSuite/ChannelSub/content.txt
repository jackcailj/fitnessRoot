!*> 测试用例
接口：action=channelSub
接口描述：频道订阅或取消订阅，详见http://10.255.223.6/wiki/pages/viewpage.action?pageId=4359564
相关数据库表：channel_sub_user
|Comment|
|用例编号|前提条件|测试点|步骤|预期结果|运行环境|
|channelSubCase01||订阅功能|首次订阅某频道|订阅成功|test|
|channelSubCase02||订阅功能|先取消订阅再订阅|订阅成功|test|
|channelSubCase03||重复订阅|已订阅的频道，再次订阅|订阅操作不起作用，正常返回结果|test,staging,online|
|channelSubCase04||取消订阅|已登录用户取消订阅|取消订阅成功|test,staging,online|
|channelSubCase05||重复取消订阅|已取消订阅的频道，再次取消订阅|取消订阅操作不起作用，正常返回结果|test,staging,online|
|channelSubCase06||参数token|token值为空|返回10003，未登录用户|test,staging,online|
|channelSubCase07||参数token|token值为无效值|返回10003，未登录用户|test,staging,online|
|channelSubCase08||参数cId|cId值为无效值（符号、字母、中文）||test,staging,online|
|channelSubCase09||参数op|op为空||test,staging,online|
|channelSubCase10||参数op|op为无效值（符号、字母、中文）||test,staging,online|
*!
!*> 测试数据
!*> Import
!define TEST_SYSTEM {slim}
|Import|
|com.dangdang.readerV5.channel|
*!
!* channelSubCase01首次订阅某频道
|script|channel sub|
|note|随机获取某频道cId|
|$cId=|getChannel|
|setParameters|!{action:channelSub,userName:!-z16@123.com-!,passWord:111111,loginType:email,token: ,cId:$cId,op:1}|
|note|获取用户custId|
|$custId=|getCustId|
|note|删除某用户订阅的某频道记录|
|delSubWithCustid|$custId|and channelid|$cId|
|ensure|do get|0|
|ensure|verify result|
*!
!* channelSubCase02先取消订阅再订阅
|script|channel sub|
|setParameters|!{action:channelSub,userName:!-z16@123.com-!,passWord:111111,loginType:email,token: ,cId:$cId,op:1}|
|note|取消订阅|
|setSubWithCustid|$custId|and channelid|$cId|and type|0|
|ensure|do get|0|
|ensure|verify result|
*!
!include .FrontPage.InterfaceTestPage.TestScript.ChannelSuite.ChannelSub.ChannelSubOnline
*!
!contents